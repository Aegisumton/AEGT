{"ast":null,"code":"import React,{useState}from'react';import{motion}from'framer-motion';import{Settings as SettingsIcon,Moon,Sun,Volume2,Wallet,User,BarChart3,Zap,LogOut,ExternalLink,Copy,CheckCircle,AlertCircle}from'lucide-react';import{toast}from'react-hot-toast';import{useQuery}from'react-query';import{useAuth}from'../hooks/useAuth';import{useTonConnect}from'../hooks/useTonConnect';import{userAPI,upgradeAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Settings=()=>{var _upgradeHistory$trans;const[darkMode,setDarkMode]=useState(true);const[soundEnabled,setSoundEnabled]=useState(true);const{user,logout}=useAuth();const{wallet,tonConnectUI}=useTonConnect();// Fetch user stats\nconst{data:userStats}=useQuery('userStats',userAPI.getStats,{select:response=>response.data});// Fetch upgrade history\nconst{data:upgradeHistory}=useQuery('upgradeHistory',upgradeAPI.getHistory,{select:response=>response.data});const copyToClipboard=text=>{navigator.clipboard.writeText(text);toast.success('Copied to clipboard!');};const formatAddress=address=>{if(!address)return'Not connected';return\"\".concat(address.slice(0,6),\"...\").concat(address.slice(-6));};const formatBalance=balance=>{if(!balance)return'0.00';return(balance/1e9).toFixed(2);};return/*#__PURE__*/_jsxs(\"div\",{className:\"settings-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your account and preferences\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-sections\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(User,{size:20}),\"Profile\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:(user===null||user===void 0?void 0:user.username)||'Anonymous'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"First Name:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:(user===null||user===void 0?void 0:user.firstName)||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"AEGT Balance:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[formatBalance(user===null||user===void 0?void 0:user.aegtBalance),\" AEGT\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Miner Level:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"Level \",(user===null||user===void 0?void 0:user.minerLevel)||1]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Wallet,{size:20}),\"TON Wallet\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"wallet-info\",children:wallet?/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-connected\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-status\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:16,className:\"status-icon connected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Wallet Connected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-address\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatAddress(wallet.account.address)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyToClipboard(wallet.account.address),className:\"copy-btn\",children:/*#__PURE__*/_jsx(Copy,{size:14})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>tonConnectUI.disconnect(),className:\"disconnect-btn\",children:\"Disconnect Wallet\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-disconnected\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-status\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16,className:\"status-icon disconnected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"No Wallet Connected\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>tonConnectUI.openModal(),className:\"connect-btn\",children:\"Connect TON Wallet\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(BarChart3,{size:20}),\"Mining Statistics\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Total Blocks Mined:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:(userStats===null||userStats===void 0?void 0:userStats.totalBlocks)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Total Rewards:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[formatBalance(userStats===null||userStats===void 0?void 0:userStats.totalRewards),\" AEGT\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Solo Blocks:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:(userStats===null||userStats===void 0?void 0:userStats.soloBlocks)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Pool Blocks:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:(userStats===null||userStats===void 0?void 0:userStats.poolBlocks)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Average Hashrate:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[(userStats===null||userStats===void 0?void 0:userStats.avgHashrate)||0,\" H/s\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Energy Capacity:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:(user===null||user===void 0?void 0:user.energyCapacity)||1000})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Zap,{size:20}),\"Recent Upgrades\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"upgrade-history\",children:(upgradeHistory===null||upgradeHistory===void 0?void 0:(_upgradeHistory$trans=upgradeHistory.transactions)===null||_upgradeHistory$trans===void 0?void 0:_upgradeHistory$trans.length)>0?upgradeHistory.transactions.slice(0,5).map((tx,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"upgrade-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upgrade-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"upgrade-type\",children:tx.type.toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"upgrade-date\",children:new Date(tx.date).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upgrade-amount\",children:[tx.amount,\" TON\"]})]},index)):/*#__PURE__*/_jsx(\"p\",{className:\"no-upgrades\",children:\"No upgrades purchased yet\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(SettingsIcon,{size:20}),\"App Settings\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-info\",children:[/*#__PURE__*/_jsx(Moon,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Dark Mode\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"setting-toggle\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:darkMode,onChange:e=>setDarkMode(e.target.checked)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-info\",children:[/*#__PURE__*/_jsx(Volume2,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Sound Effects\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"setting-toggle\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:soundEnabled,onChange:e=>setSoundEnabled(e.target.checked)})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Links\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"links-list\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"https://t.me/AegisumSupport\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"link-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Support\"}),/*#__PURE__*/_jsx(ExternalLink,{size:16})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://aegisum.co.za\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"link-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Website\"}),/*#__PURE__*/_jsx(ExternalLink,{size:16})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"settings-section\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:logout,className:\"logout-btn\",children:[/*#__PURE__*/_jsx(LogOut,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})]})})]})]});};export default Settings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}