{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{useTonConnectUI}from'@tonconnect/ui-react';import{motion,AnimatePresence}from'framer-motion';import{toast}from'react-hot-toast';// Components\nimport Layout from'./components/Layout';import LoadingScreen from'./components/LoadingScreen';import MiningDashboard from'./pages/MiningDashboard';import UpgradeShop from'./pages/UpgradeShop';import Wallet from'./pages/Wallet';import Settings from'./pages/Settings';// Hooks\nimport{useTelegramWebApp}from'./hooks/useTelegramWebApp';import{useAuth}from'./hooks/useAuth';// Services\nimport{initializeUser}from'./services/api';// Styles\nimport'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isLoading,setIsLoading]=useState(true);const[isInitialized,setIsInitialized]=useState(false);const[tonConnectUI]=useTonConnectUI();const{webApp,user:tgUser}=useTelegramWebApp();const{user,login,isAuthenticated}=useAuth();useEffect(()=>{const initializeApp=async()=>{try{// Wait for Telegram WebApp to be ready\nif(!webApp||!tgUser){setTimeout(initializeApp,100);return;}// Initialize user in backend\nconst userData=await initializeUser({telegramId:tgUser.id,username:tgUser.username,firstName:tgUser.first_name,lastName:tgUser.last_name,languageCode:tgUser.language_code});// Login user\nawait login(userData);setIsInitialized(true);toast.success('Welcome to Aegisum!');}catch(error){console.error('Failed to initialize app:',error);toast.error('Failed to initialize app. Please try again.');}finally{setIsLoading(false);}};initializeApp();},[webApp,tgUser,login]);// Show loading screen while initializing\nif(isLoading||!isInitialized){return/*#__PURE__*/_jsx(LoadingScreen,{});}// Redirect to mining dashboard if not authenticated\nif(!isAuthenticated){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please open this app through Telegram.\"})]});}return/*#__PURE__*/_jsx(Router,{basename:\"/webapp\",children:/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Layout,{}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/mining\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/mining\",element:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},children:/*#__PURE__*/_jsx(MiningDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/upgrade\",element:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},children:/*#__PURE__*/_jsx(UpgradeShop,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/wallet\",element:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},children:/*#__PURE__*/_jsx(Wallet,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},children:/*#__PURE__*/_jsx(Settings,{})})})]})})})})});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}